<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>投诉处理</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="format-detection" content="email=no" />
		<meta name="renderer" content="webkit" />
		<meta name="screen-orientation" content="portrait" />
		<meta name="full-screen" content="yes" />
		<meta name="x5-fullscreen" content="true" />
		<meta name="screen-orientation" content="portrait" />
		<meta name="x5-orientation" content="portrait" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<link rel="stylesheet" type="text/css" href="css/libs.min.css" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
	</head>

	<body class="complain">
		<header id="header" class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">投诉处理</h1>
		</header>
		<div class="mui-content">
			<div id="slider" class="mui-slider mui-fullscreen">
				<div id="sliderSegmentedControl" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
					<div class="mui-segmented-control mui-segmented-control-inverted">
						<a class="mui-control-item mui-active" href="#item1mobile">全部</a>
						<a class="mui-control-item" href="#item2mobile">未处理</a>
						<a class="mui-control-item" href="#item3mobile">已处理</a>
					</div>
				</div>
				<div id="mui-slider-group" class="mui-slider-group">
					<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
						<div id="scroll1" class="mui-scroll-wrapper">
							<div id="tip" class="mui-scroll">
								<ul class="mui-table-view">
									<li v-for="item in listData" class="mui-table-view-cell mui-media">
										<a href="javascript:;">
											<img class="mui-media-object mui-pull-left" :src="item.src">
											<div class="mui-media-body">
												<div class="mui-ellipsis" v-text="item.title"></div>
												<div class="text_box">
													<div>
														<span :class="item.color ? 'blue' : 'red'" v-text="item.color ? '已处理' : '未处理'"></span>
														<span v-text="item.time"></span>
													</div>
												</div>
											</div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item2mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">
									<li v-for="item in listData" v-if="!item.color" class="mui-table-view-cell mui-media">
										<a href="javascript:;">
											<img class="mui-media-object mui-pull-left" :src="item.src">
											<div class="mui-media-body">
												<div class="mui-ellipsis" v-text="item.title"></div>
												<div class="text_box">
													<div>
														<span :class="item.color ? 'blue' : 'red'" v-text="item.color ? '已处理' : '未处理'"></span>
														<span v-text="item.time"></span>
													</div>
												</div>
											</div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div id="item3mobile" class="mui-slider-item mui-control-content">
						<div class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view">
									<li v-for="item in listData" v-if="item.color" class="mui-table-view-cell mui-media">
										<a href="javascript:;">
											<img class="mui-media-object mui-pull-left" :src="item.src">
											<div class="mui-media-body">
												<div class="mui-ellipsis" v-text="item.title"></div>
												<div class="text_box">
													<div>
														<span :class="item.color ? 'blue' : 'red'" v-text="item.color ? '已处理' : '未处理'"></span>
														<span v-text="item.time"></span>
													</div>
												</div>
											</div>
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="js/libs.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/public.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
			var vue = new Vue({
				el: '#slider',
				data: {
					listData: []
				},
				methods: {
					ajax: function(o, cb) {
						setTimeout(() => {
							this.bind(o, cb);
						}, 800);
					},
					bind: function(o, cb, data) {
						if(o == 'up') {
							for(let i = 0; i < 10; i++) {
								let bool = Math.random() > 0.5 ? true : false;
								vue.listData.push({
									title: '事件主题：小区公园”藏着一条“臭水沟”的',
									color: bool,
									src: 'img/test1.png',
									time: '2016-05-20 10:26'
								})
							}
						} else {
							let data = []
							for(let i = 0; i < 10; i++) {
								let bool = Math.random() > 0.5 ? true : false;
								data.push({
									title: '事件主题：小区公园”藏着一条“臭水沟”的',
									color: bool,
									src: 'img/test1.png',
									time: '2016-05-20 10:26'
								})
							}
							vue.listData = data;
						}
						if(typeof(cb) == "function") {
							cb();
						}
					},
				},
				mounted() {
					mui('.mui-scroll-wrapper').scroll({
						bounce: false,
						indicators: true,
						deceleration: mui.os.ios ? 0.003 : 0.0009
					});
				}

			});
			//点击事件
			mui('.mui-slider-group').on('tap', '.mui-media', function() {
				app.view.open('complain_info.html');
			})
			mui.each(document.querySelectorAll('.mui-slider-group .mui-scroll'), function(index,pullRefreshEl) {
				//自动加载'全部项下内容'
				mui('#tip').pullToRefresh({
					down: {
						callback: function() {
							var self = this;
							vue.ajax('down', function() {
								self.endPullDownToRefresh();
							})
						}
					},
					up: {
						auto:true,
						callback: function() {
							var self = this;
							vue.ajax('up', function() {
								self.endPullUpToRefresh();
							})
						}
					}
				});
				//手动加载分支项 实际为加载全部项内容 然后分配给分支项
				mui(pullRefreshEl).pullToRefresh({
					down: {
						callback: function() {
							var self = this;
							vue.ajax('down', function() {
								self.endPullDownToRefresh();
							})
						}
					},
//					up: {
//						callback: function() {
//							var self = this;
//							vue.ajax('up', function() {
//								self.endPullUpToRefresh();
//							})
//						}
//					}
				});
			});
	</script>

</html>